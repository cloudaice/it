### it

自动化测试基于Thrift协议的服务接口。


### 想法

相比于基于HTTP协议的服务，基于Thrift协议的服务需要定义好自己的IDL，并且通常情况下都是需要根据不同语言生成相对应的代码才可以正常调用一个服务。但是仔细一想，他们的原理都是相似的。

* 基于输入的数据
* 获取到输出数据
* 执行指定的对比计算并给出对应的结果

### 输入三要素

1. JSON描述格式的输入数据
2. IDL描述文件
3. 对比描述文件

以上三项中，第二项是已经拥有的，第一项，只要测试的时候，按照IDL定义的数据结构填充数据即可；第三项需要自己定义一套测试对比语义的文法，
由于曾经的编译原理也只是剩下一点印象，一时间也很难捡回来了，关于对比的文法，还是先根据实际的场景进行定义，目前想到的是针对类型进行分别定义

* int
  * eq
  * lt
  * gt
* string
  * eq
  * sub
  * pre
  * stf
* list
  * in
  * len
* map
  * pair
  * key
  * val


### 考虑的问题

1. 最终的使用方式应该如何？

最后该工具的表现形式应该是一个二进制文件`it`，它的输入由两个文件组成，一个是IDL文件，另一个则是描述文件，描述文件包括输入以及输出对比的内容，例如：

    {
        "Meta": {
            "Addrs": ["a", "b", "c"],
            "Transport": "Buffered",
            "Protocol": "Binary",
        }
        "Input": {

        }
    }

    ./it input.json service.thrift

2. 需要解决的点

* 如何做到可以不生成代码而直接运行
